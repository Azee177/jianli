# 🚀 简历优化平台 - 启动指南

## 📝 准备工作

### 1. 安装后端依赖（只需执行一次）

打开 PowerShell，执行：

```powershell
cd E:\Code\jianli-main\apps\api
.\.venv\Scripts\activate
pip install python-multipart
pip install -r requirements.txt
```

### 2. 配置前端环境变量（只需执行一次）

在 `apps/web` 目录创建 `.env.local` 文件，内容：

```
NEXT_PUBLIC_API_BASE=http://localhost:8000
```

---

## 🎯 每次启动服务

### 第一步：启动后端

打开 **PowerShell 窗口1**，执行以下命令：

```powershell
cd E:\Code\jianli-main\apps\api
.\.venv\Scripts\activate
python -m uvicorn app.main:app --reload --port 8000
```

**成功标志**：看到以下输出
```
INFO:     Uvicorn running on http://127.0.0.1:8000
INFO:     Application startup complete.
```

**保持这个窗口打开**，不要关闭！

---

### 第二步：启动前端

打开 **PowerShell 窗口2**（新窗口），执行：

```powershell
cd E:\Code\jianli-main\apps\web
pnpm dev
```

**成功标志**：看到以下输出
```
▲ Next.js 15.x.x
- Local:        http://localhost:3000
✓ Ready in 2.5s
```

**保持这个窗口打开**，不要关闭！

---

## ✅ 验证服务启动成功

### 1. 验证后端
打开浏览器访问：http://localhost:8000/docs

应该看到 **FastAPI 的 Swagger API 文档界面**

### 2. 验证前端
打开浏览器访问：http://localhost:3000

应该看到**简历优化平台的主页**

---

## 🧪 测试上传功能

### 方法1: 在主页面测试

1. 访问 http://localhost:3000
2. 找到左侧的 **"上传 & 解析"** 面板
3. 创建测试文件 `test.txt`：

```
张三
电话: 13800138000
邮箱: zhangsan@example.com
地址: 北京

教育背景
清华大学 · 计算机科学 | 2018-2022

技能
Python, JavaScript, React, Vue
```

4. 点击 **"选择文件"** 上传
5. 应该看到：
   - ✅ 简历已上传
   - ✅ 显示简历ID
   - ✅ 显示识别的技能
   - ✅ 显示姓名

### 方法2: 使用浏览器控制台测试

1. 访问 http://localhost:3000
2. 按 `F12` 打开开发者工具
3. 切换到 **Console（控制台）** 标签
4. 输入以下代码并回车：

```javascript
// 测试后端连接
fetch('http://localhost:8000/health')
  .then(r => r.json())
  .then(data => console.log('✅ 后端状态:', data))

// 测试创建简历
fetch('http://localhost:8000/resumes', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'X-User-ID': 'test-user'
  },
  body: JSON.stringify({
    text: '张三\n电话: 13800138000\n邮箱: zhangsan@example.com\n\n技能: Python, JavaScript'
  })
})
.then(r => r.json())
.then(data => {
  console.log('✅ 简历创建成功');
  console.log('ID:', data.id);
  console.log('技能:', data.skills);
  console.log('姓名:', data.contacts.name);
})
```

---

## 🛑 停止服务

在两个 PowerShell 窗口中分别按 `Ctrl + C` 停止服务

---

## ⚠️ 常见问题

### Q1: 后端报错 "python-multipart" 未安装

**解决方案**：
```powershell
cd E:\Code\jianli-main\apps\api
.\.venv\Scripts\activate
pip install python-multipart
```

### Q2: 虚拟环境激活失败

**解决方案**：以管理员身份运行 PowerShell，执行：
```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### Q3: 端口被占用

**后端端口8000被占用**：
```powershell
# 查找占用进程
netstat -ano | findstr :8000
# 结束进程（替换PID）
taskkill /PID <PID> /F
```

**前端端口3000被占用**：
```powershell
# 查找占用进程
netstat -ano | findstr :3000
# 结束进程（替换PID）
taskkill /PID <PID> /F
```

### Q4: 前端无法连接后端

**症状**：页面显示网络错误

**解决方案**：
1. 确认后端已启动：访问 http://localhost:8000/docs
2. 检查 `apps/web/.env.local` 文件是否存在且配置正确
3. 重启前端：在前端窗口按 `Ctrl+C`，然后重新运行 `pnpm dev`

---

## 📋 快速启动命令卡片

保存以下命令，每次启动时复制粘贴：

**后端启动**（窗口1）：
```powershell
cd E:\Code\jianli-main\apps\api && .\.venv\Scripts\activate && python -m uvicorn app.main:app --reload --port 8000
```

**前端启动**（窗口2）：
```powershell
cd E:\Code\jianli-main\apps\web && pnpm dev
```

---

## ✅ 完整测试清单

启动服务后，依次完成以下测试：

- [ ] ✅ 访问 http://localhost:8000/docs 看到 API 文档
- [ ] ✅ 访问 http://localhost:3000 看到主页
- [ ] ✅ 控制台测试后端连接（fetch health）
- [ ] ✅ 上传文本简历文件
- [ ] ✅ 查看识别的姓名、技能、联系方式
- [ ] ✅ 控制台测试创建简历API

全部通过 = 功能正常！🎉

---

## 📞 需要帮助？

如果遇到问题：
1. 查看后端窗口的错误日志
2. 查看浏览器控制台的错误信息
3. 参考上面的"常见问题"部分

