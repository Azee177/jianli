# 🔧 主页面功能调试指南

## 🎯 问题描述
在主页面 (localhost:3000) 中，选择文字后出现的浮动工具栏中的四个功能（字号、段落间距、有序列表、无序列表）可能无法正常工作。

## ✅ 已确认的配置
根据自动化检查，以下配置都是正确的：
- ✅ 主页面处理函数已正确配置
- ✅ SelectionToolbar 已正确集成
- ✅ ResumeEditor API 已正确实现
- ✅ 自定义扩展已正确导入

## 🔍 调试步骤

### 1. 清除缓存并重启
```bash
# 停止开发服务器 (Ctrl+C)
# 清除缓存
rm -rf .next
# 重新启动
npm run dev
```

### 2. 浏览器调试
1. 访问 http://localhost:3000
2. 打开浏览器开发者工具 (F12)
3. 在编辑器中输入一些文字
4. 选择文字，观察是否出现浮动工具栏
5. 点击工具栏中的功能按钮
6. 查看控制台是否有错误信息

### 3. 功能测试清单

#### 字号功能测试
- [ ] 选择文字
- [ ] 点击工具栏中的"文本工具"按钮
- [ ] 点击"字号"选项
- [ ] 选择不同的字号 (12px, 16px, 20px 等)
- [ ] 观察文字大小是否改变
- [ ] 检查控制台是否有 "Font size option clicked" 日志

#### 段落间距功能测试
- [ ] 将光标放在段落中
- [ ] 点击工具栏中的"文本工具"按钮
- [ ] 点击"段落间距"选项
- [ ] 选择不同的行高 (1.2, 1.5, 1.8 等)
- [ ] 观察段落行间距是否改变
- [ ] 检查控制台是否有 "Line height option clicked" 日志

#### 有序列表功能测试
- [ ] 选择一些文字
- [ ] 点击工具栏中的"文本工具"按钮
- [ ] 点击"有序列表"选项
- [ ] 观察文字是否转换为有序列表
- [ ] 检查控制台是否有 "Ordered list button clicked" 日志

#### 无序列表功能测试
- [ ] 选择一些文字
- [ ] 点击工具栏中的"文本工具"按钮
- [ ] 点击"无序列表"选项
- [ ] 观察文字是否转换为无序列表
- [ ] 检查控制台是否有 "Bullet list button clicked" 日志

## 🐛 常见问题排查

### 问题 1: 工具栏不出现
**可能原因**: 选择事件没有正确触发
**解决方案**:
1. 确保选择了文字（不是只是点击）
2. 检查 onSelectionChange 回调是否正确传递

### 问题 2: 点击按钮没有反应
**可能原因**: 命令没有正确注册或调用
**解决方案**:
1. 检查浏览器控制台的错误信息
2. 确认扩展是否正确加载
3. 验证命令名称是否匹配

### 问题 3: 功能部分工作
**可能原因**: 某些扩展没有正确配置
**解决方案**:
1. 检查 StarterKit 的禁用配置
2. 确认自定义扩展的导入和配置
3. 验证 TextStyle 扩展是否正确加载

## 🔧 手动验证命令

在浏览器控制台中运行以下代码来测试命令是否可用：

```javascript
// 获取编辑器实例（需要在页面加载后运行）
const editor = window.__tiptapEditor; // 如果有全局引用

// 或者通过 React DevTools 找到编辑器实例

// 测试字号命令
editor.commands.setFontSize('20px');

// 测试段落间距命令
editor.commands.setParagraphSpacing({ lineHeight: '1.8' });

// 测试列表命令
editor.commands.toggleOrderedList();
editor.commands.toggleBulletList();
```

## 📝 调试日志

在测试过程中，请记录以下信息：

### 控制台错误
```
记录任何 JavaScript 错误或警告
```

### 网络请求
```
检查是否有失败的资源加载
```

### 功能测试结果
```
字号功能: ✅/❌
段落间距功能: ✅/❌
有序列表功能: ✅/❌
无序列表功能: ✅/❌
```

## 🚀 如果问题仍然存在

如果按照上述步骤仍然无法解决问题，可能需要：

1. **检查扩展版本兼容性**: 确保所有 TipTap 扩展版本一致
2. **重新安装依赖**: `rm -rf node_modules && npm install`
3. **检查 TypeScript 编译**: 确保没有类型错误
4. **对比测试页面**: 在 `/test-editor` 页面中测试相同功能

## 📞 获取帮助

如果需要进一步帮助，请提供：
1. 浏览器控制台的完整错误信息
2. 功能测试清单的结果
3. 网络面板中的任何错误请求
4. 具体的操作步骤和预期结果

---

**记住**: 测试页面 (`/test-editor`) 中的功能是正常的，所以问题可能在于主页面的集成或配置细节。