# ğŸš€ åç«¯å¯åŠ¨è¯´æ˜

## ğŸ“‹ å¿«é€Ÿå¯åŠ¨

### æ–¹å¼1ï¼šåŒå‡»å¯åŠ¨ï¼ˆæ¨èï¼‰

ç›´æ¥åŒå‡»ä»¥ä¸‹æ–‡ä»¶ä¹‹ä¸€ï¼š
- `å¯åŠ¨åç«¯.bat` - æ‰¹å¤„ç†æ–‡ä»¶
- `å¯åŠ¨åç«¯.ps1` - PowerShellè„šæœ¬

### æ–¹å¼2ï¼šå‘½ä»¤è¡Œå¯åŠ¨

```bash
# åœ¨ apps/api ç›®å½•ä¸‹è¿è¡Œ
python start_backend.py
```

### æ–¹å¼3ï¼šæ‰‹åŠ¨å¯åŠ¨ï¼ˆå®Œå…¨æ§åˆ¶ï¼‰

```bash
# 1. æ¿€æ´»condaç¯å¢ƒ
conda activate jianli

# 2. åˆ‡æ¢åˆ°APIç›®å½•
cd apps/api

# 3. å¯åŠ¨æœåŠ¡
python -m uvicorn app.main:app --reload --host 127.0.0.1 --port 8000
```

## ğŸ”§ é¦–æ¬¡ä½¿ç”¨é…ç½®

### 1. åˆ›å»ºcondaç¯å¢ƒï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰

```bash
conda create -n jianli python=3.11
```

### 2. æ¿€æ´»ç¯å¢ƒå¹¶å®‰è£…ä¾èµ–

```bash
conda activate jianli
cd apps/api
pip install -r requirements.txt
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

åœ¨ `apps/api` ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
# Qwen APIé…ç½®
QWEN_API_KEY=your_api_key_here

# OCRæœåŠ¡é…ç½®ï¼ˆå¯é€‰ï¼‰
OCR_SERVICE_URL=your_ocr_service_url

# ç«¯å£é…ç½®ï¼ˆå¯é€‰ï¼Œé»˜è®¤8000ï¼‰
BACKEND_PORT=8000
```

### 4. å¯åŠ¨æœåŠ¡

ä½¿ç”¨ä¸Šè¿°ä»»æ„å¯åŠ¨æ–¹å¼å³å¯ã€‚

## ğŸ“– è®¿é—®æœåŠ¡

å¯åŠ¨æˆåŠŸåï¼Œå¯ä»¥è®¿é—®ï¼š

- **APIæ–‡æ¡£**: http://127.0.0.1:8000/docs
- **å¥åº·æ£€æŸ¥**: http://127.0.0.1:8000/health
- **æ ¹è·¯å¾„**: http://127.0.0.1:8000/

## ğŸ› å¸¸è§é—®é¢˜

### é—®é¢˜1ï¼šæ‰¾ä¸åˆ°condaç¯å¢ƒ

**ç—‡çŠ¶**ï¼šæç¤º"æœªæ‰¾åˆ°condaçš„jianliç¯å¢ƒ"

**è§£å†³**ï¼š
```bash
# æŸ¥çœ‹ç°æœ‰ç¯å¢ƒ
conda env list

# åˆ›å»ºjianliç¯å¢ƒ
conda create -n jianli python=3.11

# æ¿€æ´»å¹¶å®‰è£…ä¾èµ–
conda activate jianli
pip install -r requirements.txt
```

### é—®é¢˜2ï¼šç«¯å£è¢«å ç”¨

**ç—‡çŠ¶**ï¼šæç¤º"Address already in use"

**è§£å†³æ–¹å¼A - æ›´æ¢ç«¯å£**ï¼š
```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
set BACKEND_PORT=8001  # Windows CMD
$env:BACKEND_PORT=8001  # PowerShell

# é‡æ–°å¯åŠ¨
python start_backend.py
```

**è§£å†³æ–¹å¼B - å…³é—­å ç”¨ç«¯å£çš„è¿›ç¨‹**ï¼š
```powershell
# æŸ¥çœ‹å ç”¨ç«¯å£çš„è¿›ç¨‹
netstat -ano | findstr :8000

# ç»“æŸè¿›ç¨‹ï¼ˆæ›¿æ¢<PID>ä¸ºå®é™…è¿›ç¨‹IDï¼‰
taskkill /F /PID <PID>
```

### é—®é¢˜3ï¼šä¾èµ–ç¼ºå¤±

**ç—‡çŠ¶**ï¼šæç¤º"No module named 'fastapi'"æˆ–ç±»ä¼¼é”™è¯¯

**è§£å†³**ï¼š
```bash
conda activate jianli
cd apps/api
pip install -r requirements.txt
```

### é—®é¢˜4ï¼šAPI Keyæœªé…ç½®

**ç—‡çŠ¶**ï¼šæœåŠ¡å¯åŠ¨ï¼Œä½†LLMåŠŸèƒ½ä¸å·¥ä½œ

**è§£å†³**ï¼š
åœ¨ `apps/api/.env` æ–‡ä»¶ä¸­æ·»åŠ ï¼š
```
QWEN_API_KEY=your_qwen_api_key
```

## ğŸ“ è„šæœ¬è¯´æ˜

### start_backend.py

æ™ºèƒ½å¯åŠ¨è„šæœ¬ï¼ŒåŠŸèƒ½ï¼š
- âœ… è‡ªåŠ¨æ£€æµ‹condaç¯å¢ƒ
- âœ… éªŒè¯ä¾èµ–æ˜¯å¦å®‰è£…
- âœ… æ£€æŸ¥é…ç½®æ–‡ä»¶
- âœ… å‹å¥½çš„é”™è¯¯æç¤º
- âœ… æ”¯æŒè‡ªå®šä¹‰ç«¯å£

### å¯åŠ¨åç«¯.bat

Windowsæ‰¹å¤„ç†æ–‡ä»¶ï¼Œç®€å•åŒ…è£…Pythonè„šæœ¬ï¼Œæ–¹ä¾¿åŒå‡»å¯åŠ¨ã€‚

### å¯åŠ¨åç«¯.ps1

PowerShellè„šæœ¬ï¼Œæä¾›æ›´å¥½çš„Windowsä½“éªŒã€‚

## ğŸ”„ æ›´æ–°è®°å½•

- 2024-11-08: åˆ›å»ºæ™ºèƒ½å¯åŠ¨è„šæœ¬ï¼Œæ”¯æŒè‡ªåŠ¨æ£€æµ‹condaç¯å¢ƒ
- ä¹‹å‰: ä½¿ç”¨ start_server.bat ç¡¬ç¼–ç Pythonè·¯å¾„

## ğŸ’¡ æç¤º

- å»ºè®®ä½¿ç”¨ `start_backend.py`ï¼Œå®ƒä¼šè‡ªåŠ¨å¤„ç†ç¯å¢ƒé—®é¢˜
- å¦‚æœéœ€è¦è°ƒè¯•ï¼Œå¯ä»¥ä½¿ç”¨æ‰‹åŠ¨å¯åŠ¨æ–¹å¼
- ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨gunicornè€Œä¸æ˜¯uvicorn
- è®°å¾—å®šæœŸæ›´æ–°ä¾èµ–ï¼š`pip install -r requirements.txt --upgrade`


